# still some bugs that need to get worked out in this, but almost have it
# Need to sort out space characters
# Need to figure out why it's tacking on a '+' at the end
# The space not being handled properly and the + being tacked on at the end are related.
# wc -m counts the space characters, but the for loop is ignorning the space characters for some reason
read -p "String to convert: " conv_string;

str_count=$(echo $conv_string | wc -m)
counter=1
outstring="exec = Command + "

for testchar in $(echo $conv_string | fold -w1); do
#for testchar in $(echo $conv_string); do
#for testchar in $conv_string; do
	newchr=$(egrep "(Chr)\(.{1,3}\).[$testchar]" chr_table.txt | awk '{print $1}')
	counter=$((counter+1))
	# Handle space characters
	#if [[ $testchar == "\ " ]]
	#then
		#newchr="Chr(32)"
	#fi
	
	outstring+=$newchr

	if [[ $(expr $counter % 50) -eq 0 ]]
	then
		outstring+="\nexec = exec "
	fi

	if [[ $counter -ne $str_count ]] 
	then
		outstring+=" + "
	fi
done

echo -e "\nOutput\n====================================\n"

echo -e $outstring
